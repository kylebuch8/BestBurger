(function(e){"use strict";e.Best={appName:"BestBurger",authProvider:"authProvider",tokenString:"token"},angular.module(Best.appName,[]).config(["$routeProvider","$compileProvider",function(e,t){e.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/profile",{templateUrl:"views/profile.html",controller:"ProfileCtrl"}).when("/rate",{templateUrl:"views/rate.html",controller:"RateCtrl"}).when("/search",{templateUrl:"views/search.html",controller:"SearchCtrl"}).when("/venues",{templateUrl:"views/venues.html",controller:"VenuesCtrl"}).when("/venues/:venueId",{templateUrl:"views/venue.html",controller:"VenueCtrl"}).when("/venues/:venueId/burgers/add",{templateUrl:"views/addburger.html",controller:"AddBurgerCtrl"}).otherwise({redirectTo:"/"}),t.urlSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|tel):/)}]).run(["$rootScope","$location",function(e,t){e.exitApp=function(){navigator.app.exitApp()},localStorage.getItem(Best.tokenString)||t.path("/login")}])})(window),function(){"use strict";angular.module(Best.appName).controller("MainCtrl",["$rootScope","$scope",function(e,t){function o(){"Android"===device.platform&&document.addEventListener("backbutton",e.exitApp,!1)}t.feed=[{user:{name:"Kyle Buchanan"},burger:{name:"The Heartattack"},venue:{name:"City Beverage"}},{user:{name:"Luke Dary"},burger:{name:"The Meat Monster"},venue:{name:"City Beverage"}}],document.addEventListener("deviceready",o,!1)}])}(),function(){"use strict";angular.module(Best.appName).controller("LoginCtrl",["$rootScope","$scope","$location",function(e,t,o){function r(){"Android"===device.platform&&document.addEventListener("backbutton",e.exitApp,!1)}document.addEventListener("deviceready",r,!1),t.openChildBrowser=function(r){var n="";switch(r){case"google":n="https://accounts.google.com/o/oauth2/auth?response_type=token&scope=https://www.googleapis.com/auth/userinfo.profile&client_id=124967647113.apps.googleusercontent.com&redirect_uri=http://www.google.com/";break;case"facebook":n="https://www.facebook.com/dialog/oauth?client_id=212457378769328&redirect_uri=http://www.google.com/&scope=email&response_type=token"}var a=window.open(n,"_blank","location=yes");a.addEventListener("loadstart",function(n){var l=RegExp(/http:\/\/www.google.com\/[^;]+access_token=([^"]+)/),u=l.exec(n.url);if(console.log("Loading url: "+n.url),null===u)console.log("no code");else{console.log("we have a code"),console.log(u[1]);var c=u[1];localStorage.setItem(Best.authProvider,r),localStorage.setItem(Best.tokenString,c),a.close(),console.log("send to profile page"),document.removeEventListener("backbutton",e.exitApp,!1),t.$apply(function(){o.path("/profile")})}})}}])}(),function(){"use strict";angular.module(Best.appName).controller("ProfileCtrl",["$scope","$http",function(e,t){if("google"===localStorage.getItem(Best.authProvider)){console.log("authProvider is google"),console.log("token is: "+localStorage.getItem(Best.tokenString));var o=localStorage.getItem(Best.tokenString),r="https://www.googleapis.com/oauth2/v1/userinfo?access_token="+o;console.log("url is: "+r),t.get(r).success(function(t){e.name=t.name,e.picture=t.picture}).error(function(){alert("there was a problem")})}if("facebook"===localStorage.getItem(Best.authProvider)){var o=localStorage.getItem(Best.tokenString),r="https://graph.facebook.com/me?fields=picture,id,name,first_name,last_name,email&access_token="+o;console.log("url is: "+r),t.get(r).success(function(t){e.name=t.name,e.picture=t.picture.data.url}).error(function(){alert("there was a problem")})}}])}(),function(){"use strict";angular.module(Best.appName).controller("RateCtrl",["$scope",function(e){e.submit=function(){alert("Burger Rated!")}}])}(),function(){"use strict";angular.module(Best.appName).factory("FoursquareSvc",["$http",function(e){var t={suggestVenue:function(o){console.log("query: "+o),e.get("https://api.foursquare.com/v2/venues/suggestCompletion",{params:{ll:"35.9939,-78.8989",query:o,client_id:"YJO3HB1UU0XLEYPQGE4LJH4MANMFRMEZDUBKTAWXDH0A5V1F",client_secret:"Z3Z114WIR4LXAYEUMV5KLZLYCXNUKDZ2WOOZDOWCBEG2YXIV",v:"20130402"}}).success(function(e){t.suggest=e,console.log(e)}).error(function(e,t,o,r){console.log("there was an error with the foursquare service"),console.log("url: "+r.url),console.log("url: "+r.params)})}};return t}])}(),function(){"use strict";angular.module(Best.appName).factory("VenuesSvc",function(){function e(e){for(var o=0,r=t.length;r>o;o+=1)if(t[o].id===e.venueId)return t[o].burgers.push({id:Math.floor(1e5*Math.random()),name:e.burgerName}),t[o].burgers[t[o].burgers.length-1]}var t=[{id:1,name:"City Beverage",burgers:[{id:1,name:"The Heartattack"},{id:2,name:"The Meat Monster"}]},{id:2,name:"Bull McCabe's",burgers:[{id:3,name:"The Irish Burger"},{id:4,name:"Fried Egg Burger"}]}];return{getVenues:function(){return t},getVenue:function(){},addBurger:e}})}(),function(){"use strict";angular.module(Best.appName).controller("SearchCtrl",["$rootScope","$scope","FoursquareSvc",function(e,t,o){document.removeEventListener("backbutton",e.exitApp,!1),t.FoursquareSvc=o,t.$watch("venue",function(e){void 0!==e&&""!==e&&o.suggestVenue(e)}),t.$watch("FoursquareSvc.suggest",function(e){void 0!==e&&(t.venues=e)})}])}(),function(){"use strict";angular.module(Best.appName).controller("VenuesCtrl",["$rootScope","$scope","$location","VenuesSvc",function(e,t,o,r){function n(e){console.log(e)}function a(e){console.log(e)}document.removeEventListener("backbutton",e.exitApp,!1),t.venues=r.getVenues(),t.click=function(e){o.path("/venues/"+e)},navigator.geolocation.getCurrentPosition(n,a)}])}(),function(){"use strict";angular.module(Best.appName).controller("VenueCtrl",["$scope","$routeParams","$filter","VenuesSvc",function(e,t,o,r){e.venue=o("filter")(r.getVenues(),{id:t.venueId})[0],e.click=function(e){console.log(e)}}])}(),function(){"use strict";angular.module(Best.appName).controller("AddBurgerCtrl",["$scope","$routeParams","$filter","VenuesSvc",function(e,t,o,r){e.venue=o("filter")(r.getVenues(),{id:t.venueId})[0],e.burgerAdded=!1,e.submit=function(){var t=r.addBurger({venueId:e.venue.id,burgerName:e.burgerName});null!==t&&(e.burgerAdded=!0)}}])}();